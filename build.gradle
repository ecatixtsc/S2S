/*
 * This build file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * user guide available at https://docs.gradle.org/4.3/userguide/java_library_plugin.html
 */

// In this section you declare where to find the dependencies of your project
buildscript{
	repositories {
		mavenCentral()
		jcenter()
	}

	dependencies { classpath 'com.google.protobuf:protobuf-gradle-plugin:0.8.6' }
}

// Apply the java-library plugin to add support for Java Library
plugins {
	id 'com.google.protobuf' version "0.8.6"
	id 'java' }

def jacksonVersion = '2.9.6'
def protocVersion = '3.6.1'
def grpcVersion = '1.15.0'
def googleCollectVersion = 'snapshot-20080530'


dependencies {
	repositories {
		maven { url "http://download.osgeo.org/webdav/geotools/" }
		mavenCentral()
		jcenter()
	}

	compile group: 'log4j', name: 'log4j', version: '1.2.17'

	//json-jackson
	compile group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: jacksonVersion
	compile group: 'com.fasterxml.jackson.core', name: 'jackson-annotations', version: jacksonVersion
	compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: jacksonVersion

	// goegraphical coordinates transformation
	compile group: 'javax.measure', name: 'jsr-275', version: '1.0.0'
	compile group: 'javax.media', name: 'jai_core', version: '1.1.3'
	compile group: 'org.geotools', name: 'gt-epsg-hsql', version: '19.2'
	compile group: 'org.geotools', name: 'gt-referencing', version: '19.2'
	runtime group: 'javax.vecmath', name: 'vecmath', version: '1.5.2'
	compile group: 'org.geotools', name: 'gt-metadata', version: '19.2'
	compile group: 'org.opengis', name: 'geoapi', version: '2.3-M1'
	compile group: 'org.hsqldb', name: 'hsqldb', version: '2.4.1'
	compile group: 'org.geotools', name: 'gt-opengis', version: '12-beta'
	compile group: 'org.geotools', name: 'gt-api', version: '19.2'
	compile group: 'org.locationtech.jts', name: 'jts-core', version: '1.16.0'

	// proto buffer
	compile group: 'com.google.code.google-collections', name: 'google-collect', version: googleCollectVersion
	compile "com.google.protobuf:protobuf-java:${protocVersion}"

	// This dependency is exported to consumers, that is to say found on their compile classpath.
	//api 'org.apache.commons:commons-math3:3.6.1'
	
	// https://mvnrepository.com/artifact/org.apache.poi/poi
	compile group: 'org.apache.poi', name: 'poi', version: '4.0.1'	

	// This dependency is used internally, and not exposed to consumers on their own compile classpath.
	implementation 'com.google.guava:guava:23.0'

	// Use JUnit test framework
	testImplementation 'junit:junit:4.12'
}

String generatedSourcePath = "${projectDir}/src/main/generated"

project.sourceSets {
	main {
		proto { // Where to look for proto messages. In addition to the default 'src/main/proto'
			srcDir 'src/main/resources/protoc/' }
		java {
			// Include self written and generated code
			srcDirs 'src/main/java'
			srcDir "${generatedSourcePath}/main/java"
		}
	}
	test {
		proto { // In addition to the default 'src/test/proto'
			srcDir 'src/test/protoc' }
	}
}

// Proto Buffer file creation
protobuf {
	protoc { artifact = "com.google.protobuf:protoc:${protocVersion}" }

	generateProtoTasks.generatedFilesBaseDir = generatedSourcePath

	generateProtoTasks {
		all().each { task ->
			task.builtins { java {  } }
		}
	}
}

clean { delete generatedSourcePath }

